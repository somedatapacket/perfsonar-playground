##
# Set the directory where the database will be stored
database: /var/lib/maddash/ 

##
# Set the number of jobs that can run in parallel. Default is 20.
#jobThreadPoolSize: 20

##
# Set number of jobs that can be in queue at one time. Default is 250.
#jobBatchSize: 250

###
# Disable the job scheduler if you only want to run the REST server
#disableScheduler: 0

###
# Skips table and index rebuild at start-up. It can speed up start-up time if set to 1.
#skipTableBuild: 0

##
# Set the host where the REST server listens
serverHost: "localhost"

##
# Activate http and set the port where it listens
http: 
    port: 8881

##
# Activate https and set port and keystores
#https:
#    port: 8882
#    keystore: "/usr/lib/maddash/maddash-webui/etc/maddash.jks"
#    keystorePassword: "changeit"
# want, require or off
#    clientAuth: "want" 

##
# 'groups' are where you define lists of hosts. You need to provide the name of the group 
# and the list of the hosts in that group. The default example below defines two groups:
# "myOwampHosts" and "myBwctlHosts". You can define any number of other groups and give them
# any alphanumeric name. A host may belong to multiple groups.
groups:
    myOwampHosts :
        - "198.111.227.235"
        - "198.111.226.26"
        - "141.213.253.141"
        - "141.213.135.1"
        - "35.2.0.100"
        
    myBwctlHosts :
        - "198.111.227.235"
        - "198.111.226.26"
        - "141.213.253.141"
        - "141.213.135.1"
        - "35.2.0.100"

##
# 'groupMembers' allow you to assign special properties to items in 'groups': 
#     - Set the "id" to the value used in the "group" list. This is required.
#     - Set the "label" to the name  you want displayed. This block 
#         is useful in cases where you want  a value such as an IP address or port 
#         number passed to a check but on the GUI you want a human-readable value displayed
#     - Set the "pstoolkiturl" to the URL of a perfSONAR Toolkit web page
groupMembers:
    - id: "198.111.226.26"
      label: "maddash box"
      pstoolkiturl: "http://198.111.226.26/toolkit" 
    - id: "198.111.227.235"
      label: "Roy's box"
      pstoolkiturl: "http://198.111.227.235/toolkit"
    - id: "141.213.253.141"
      label: "liva1"
    - id: "141.213.135.1"
      label: "liva2"
    - id: "35.2.0.100"
      label: "liva3"
##

##
# 'checks' are where you define a template for a check to execute. You'll provide a 
#  command to run, 
checks:
  MPerf_Mesh_-_OWAMP_Test_Between_DICE_Latency_Hosts_-_Loss:
    checkInterval: 1800
    critical_description: Loss rate is >= 0.01
    description: Loss from %row to %col
    excludeChecks:
      141.213.135.18:
        - 141.213.135.18
      141.213.253.141:
        - 141.213.253.141
      198.111.226.26:
        - 198.111.226.26
      198.111.227.235:
        - 198.111.227.235
      35.2.0.100:
        - 35.2.0.100
    id: MPerf_Mesh_-_OWAMP_Test_Between_DICE_Latency_Hosts_-_Loss
    name: Loss
    ok_description: Loss rate is <= 0
    params:
      command: /usr/lib64/nagios/plugins/check_owdelay.pl -u %maUrl -w 0 -c 0.01 -r 900 -l -p -s %row -d %col -a %row
      graphUrl:
        141.213.135.18:
          default: /perfsonar-graphs/graphWidget.cgi?url=%maUrl&source=%row&dest=%col&agent=%row
        141.213.253.141:
          default: /perfsonar-graphs/graphWidget.cgi?url=%maUrl&source=%row&dest=%col&agent=%row
        198.111.226.26:
          default: /perfsonar-graphs/graphWidget.cgi?url=%maUrl&source=%row&dest=%col&agent=%row
        198.111.227.235:
          default: /perfsonar-graphs/graphWidget.cgi?url=%maUrl&source=%row&dest=%col&agent=%row
        35.2.0.100:
          default: /perfsonar-graphs/graphWidget.cgi?url=%maUrl&source=%row&dest=%col&agent=%row
      maUrl:
        141.213.135.18:
          default: http://198.111.226.26/esmond/perfsonar/archive
        141.213.253.141:
          default: http://198.111.226.26/esmond/perfsonar/archive
        198.111.226.26:
          default: http://198.111.226.26/esmond/perfsonar/archive
        198.111.227.235:
          default: http://198.111.226.26/esmond/perfsonar/archive
        35.2.0.100:
          default: http://198.111.226.26/esmond/perfsonar/archive
    retryAttempts: 1
    retryInterval: 600
    timeout: 60
    type: net.es.maddash.checks.PSNagiosCheck
    warning_description: Loss rate is >= 0
  MPerf_Mesh_-_TCP_BWCTL_Test_Between_DICE_Bandwidth_Hosts_-_Throughput:
    checkInterval: 28800
    critical_description: Throughput <= 500Mbps
    description: Throughput from %row to %col
    excludeChecks:
      141.213.135.18:
        - 141.213.135.18
      141.213.253.141:
        - 141.213.253.141
      198.111.226.26:
        - 198.111.226.26
      198.111.227.235:
        - 198.111.227.235
      35.2.0.100:
        - 35.2.0.100
    id: MPerf_Mesh_-_TCP_BWCTL_Test_Between_DICE_Bandwidth_Hosts_-_Throughput
    name: Throughput
    ok_description: Throughput >= 900Mbps
    params:
      command: '/usr/lib64/nagios/plugins/check_throughput.pl -u %maUrl -w 0.9: -c 0.5: -r 86400 -s %row -d %col -a %row -p tcp'
      graphUrl:
        141.213.135.18:
          default: /perfsonar-graphs/graphWidget.cgi?url=%maUrl&source=%row&dest=%col&protocol=tcp&agent=%row
        141.213.253.141:
          default: /perfsonar-graphs/graphWidget.cgi?url=%maUrl&source=%row&dest=%col&protocol=tcp&agent=%row
        198.111.226.26:
          default: /perfsonar-graphs/graphWidget.cgi?url=%maUrl&source=%row&dest=%col&protocol=tcp&agent=%row
        198.111.227.235:
          default: /perfsonar-graphs/graphWidget.cgi?url=%maUrl&source=%row&dest=%col&protocol=tcp&agent=%row
        35.2.0.100:
          default: /perfsonar-graphs/graphWidget.cgi?url=%maUrl&source=%row&dest=%col&protocol=tcp&agent=%row
      maUrl:
        141.213.135.18:
          default: http://198.111.226.26/esmond/perfsonar/archive
        141.213.253.141:
          default: http://198.111.226.26/esmond/perfsonar/archive
        198.111.226.26:
          default: http://198.111.226.26/esmond/perfsonar/archive
        198.111.227.235:
          default: http://198.111.226.26/esmond/perfsonar/archive
        35.2.0.100:
          default: http://198.111.226.26/esmond/perfsonar/archive
    retryAttempts: 3
    retryInterval: 600
    timeout: 60
    type: net.es.maddash.checks.PSNagiosCheck
    warning_description: Throughput < 900Mbps
  MPerf_Mesh_-_UDP_BWCTL_Test_Between_DICE_Bandwidth_Hosts_-_Throughput:
    checkInterval: 28800
    critical_description: Throughput <= 500Mbps
    description: Throughput from %row to %col
    excludeChecks:
      141.213.135.18:
        - 141.213.135.18
      141.213.253.141:
        - 141.213.253.141
      198.111.226.26:
        - 198.111.226.26
      198.111.227.235:
        - 198.111.227.235
      35.2.0.100:
        - 35.2.0.100
    id: MPerf_Mesh_-_UDP_BWCTL_Test_Between_DICE_Bandwidth_Hosts_-_Throughput
    name: Throughput
    ok_description: Throughput >= 900Mbps
    params:
      command: '/usr/lib64/nagios/plugins/check_throughput.pl -u %maUrl -w 0.9: -c 0.5: -r 86400 -s %row -d %col -a %row -p udp --udpbandwidth 50000000'
      graphUrl:
        141.213.135.18:
          default: /perfsonar-graphs/graphWidget.cgi?url=%maUrl&source=%row&dest=%col&protocol=udp&filter=bw-target-bandwidth:50000000&agent=%row
        141.213.253.141:
          default: /perfsonar-graphs/graphWidget.cgi?url=%maUrl&source=%row&dest=%col&protocol=udp&filter=bw-target-bandwidth:50000000&agent=%row
        198.111.226.26:
          default: /perfsonar-graphs/graphWidget.cgi?url=%maUrl&source=%row&dest=%col&protocol=udp&filter=bw-target-bandwidth:50000000&agent=%row
        198.111.227.235:
          default: /perfsonar-graphs/graphWidget.cgi?url=%maUrl&source=%row&dest=%col&protocol=udp&filter=bw-target-bandwidth:50000000&agent=%row
        35.2.0.100:
          default: /perfsonar-graphs/graphWidget.cgi?url=%maUrl&source=%row&dest=%col&protocol=udp&filter=bw-target-bandwidth:50000000&agent=%row
      maUrl:
        141.213.135.18:
          default: http://198.111.226.26/esmond/perfsonar/archive
        141.213.253.141:
          default: http://198.111.226.26/esmond/perfsonar/archive
        198.111.226.26:
          default: http://198.111.226.26/esmond/perfsonar/archive
        198.111.227.235:
          default: http://198.111.226.26/esmond/perfsonar/archive
        35.2.0.100:
          default: http://198.111.226.26/esmond/perfsonar/archive
    retryAttempts: 3
    retryInterval: 600
    timeout: 60
    type: net.es.maddash.checks.PSNagiosCheck
    warning_description: Throughput < 900Mbps
  bwctlCheck:
    checkInterval: 28800
    description: Throughput from %row to %col (according to %row MA)
    name: Throughput
    params:
      command: '/usr/lib64/nagios/plugins/check_throughput.pl -u %maUrl -w .1: -c .01: -r 86400 -s %row -d %col'
      graphUrl: http://198.111.226.26/perfsonar-graphs/graphWidget.cgi?url=%maUrl&dest=%col&source=%row
      maUrl:
        default: http://localhost/esmond/perfsonar/archive
    retryAttempts: 3
    retryInterval: 600
    timeout: 60
    type: net.es.maddash.checks.PSNagiosCheck
  bwctlRevCheck:
    checkInterval: 28800
    description: Throughput from %col to %row (according to %row MA)
    name: Throughput Reverse
    params:
      command: '/usr/lib64/nagios/plugins/check_throughput.pl -u %maUrl -w .1: -c .01: -r 86400 -s %col -d %row'
      graphUrl: http://198.111.226.26/perfsonar-graphs/graphWidget.cgi?url=%maUrl&dest=%row&source=%col
      maUrl:
        default: http://localhost/esmond/perfsonar/archive
    retryAttempts: 3
    retryInterval: 600
    timeout: 60
    type: net.es.maddash.checks.PSNagiosCheck
  owampLossCheck:
    checkInterval: 1800
    description: Loss from %row to %col (according to %row MA)
    name: Loss
    params:
      command: /usr/lib64/nagios/plugins/check_owdelay.pl -u %maUrl -w 0 -c 0 -r 1800 -l -p -s %row -d %col
      graphUrl: http://198.111.226.26/perfsonar-graphs/graphWidget.cgi?url=%maUrl&dest=%col&source=%row
      maUrl:
        default: http://localhost/esmond/perfsonar/archive
    retryAttempts: 3
    retryInterval: 300
    timeout: 60
    type: net.es.maddash.checks.PSNagiosCheck
  owampLossRevCheck:
    checkInterval: 1800
    description: Loss from %col to %row (according to %row MA)
    name: Loss Reverse
    params:
      command: /usr/lib64/nagios/plugins/check_owdelay.pl -u %maUrl -w 0 -c 0 -r 900 -l -p -s %col -d %row
      graphUrl: http://198.111.226.26/perfsonar-graphs/graphWidget.cgi?url=%maUrl&dest=%row&source=%col
      maUrl:
        default: http://localhost/esmond/perfsonar/archive
    retryAttempts: 3
    retryInterval: 300
    timeout: 60
    type: net.es.maddash.checks.PSNagiosCheck
dashboards:
  -
    grids:
      -
        name: OWAMP
      -
        name: BWCTL
    name: My Sites
  -
    added_by_mesh_agent: 1
    grids:
      -
        name: 'MPerf Mesh - TCP BWCTL Test Between DICE Bandwidth Hosts'
      -
        name: 'MPerf Mesh - UDP BWCTL Test Between DICE Bandwidth Hosts'
      -
        name: 'MPerf Mesh - OWAMP Test Between DICE Latency Hosts'
    name: MPerf Mesh
database: /var/lib/maddash/
grids:
  -
    checks:
      - owampLossCheck
      - owampLossRevCheck
    colOrder: alphabetical
    columnAlgorithm: all
    columns: myOwampHosts
    excludeSelf: 1
    name: OWAMP
    rowOrder: alphabetical
    rows: myOwampHosts
    statusLabels:
      critical: Loss is greater than 0
      notrun: Check has not yet run
      ok: Loss is 0
      unknown: Unable to retrieve data
  -
    checks:
      - bwctlCheck
      - bwctlRevCheck
    colOrder: alphabetical
    columnAlgorithm: all
    columns: myBwctlHosts
    excludeSelf: 1
    name: BWCTL
    rowOrder: alphabetical
    rows: myBwctlHosts
    statusLabels:
      critical: Throughput < 10Mbps
      extra:
        -
          description: Down for maintenance
          shortName: EVENT
          value: 5
      notrun: Check has not yet run
      ok: Throughput >= 100Mbps
      unknown: Unable to retrieve data
      warning: Throughput >= 10Mbps
  -
    added_by_mesh_agent: 1
    checks:
      - MPerf_Mesh_-_TCP_BWCTL_Test_Between_DICE_Bandwidth_Hosts_-_Throughput
    colOrder: alphabetical
    columnAlgorithm: all
    columns: MPerf_Mesh_-_TCP_BWCTL_Test_Between_DICE_Bandwidth_Hosts
    excludeSelf: 1
    name: 'MPerf Mesh - TCP BWCTL Test Between DICE Bandwidth Hosts'
    rowOrder: alphabetical
    rows: MPerf_Mesh_-_TCP_BWCTL_Test_Between_DICE_Bandwidth_Hosts
    statusLabels:
      critical: Throughput <= 500Mbps
      notrun: Check has not yet run
      ok: Throughput >= 900Mbps
      unknown: Unable to retrieve data
      warning: Throughput < 900Mbps
  -
    added_by_mesh_agent: 1
    checks:
      - MPerf_Mesh_-_UDP_BWCTL_Test_Between_DICE_Bandwidth_Hosts_-_Throughput
    colOrder: alphabetical
    columnAlgorithm: all
    columns: MPerf_Mesh_-_UDP_BWCTL_Test_Between_DICE_Bandwidth_Hosts
    excludeSelf: 1
    name: 'MPerf Mesh - UDP BWCTL Test Between DICE Bandwidth Hosts'
    rowOrder: alphabetical
    rows: MPerf_Mesh_-_UDP_BWCTL_Test_Between_DICE_Bandwidth_Hosts
    statusLabels:
      critical: Throughput <= 500Mbps
      notrun: Check has not yet run
      ok: Throughput >= 900Mbps
      unknown: Unable to retrieve data
      warning: Throughput < 900Mbps
  -
    added_by_mesh_agent: 1
    checks:
      - MPerf_Mesh_-_OWAMP_Test_Between_DICE_Latency_Hosts_-_Loss
    colOrder: alphabetical
    columnAlgorithm: all
    columns: MPerf_Mesh_-_OWAMP_Test_Between_DICE_Latency_Hosts
    excludeSelf: 1
    name: 'MPerf Mesh - OWAMP Test Between DICE Latency Hosts'
    rowOrder: alphabetical
    rows: MPerf_Mesh_-_OWAMP_Test_Between_DICE_Latency_Hosts
    statusLabels:
      critical: Loss rate is >= 0.01
      notrun: Check has not yet run
      ok: Loss rate is <= 0
      unknown: Unable to retrieve data
      warning: Loss rate is >= 0
groupMembers:
  -
    id: 198.111.226.26
    label: maddash box
    pstoolkiturl: http://198.111.226.26/toolkit
  -
    id: 198.111.227.235
    label: Roy's box
    pstoolkiturl: http://198.111.227.235/toolkit
  -
    id: 141.213.253.141
    label: liva1
  -
    id: 141.213.135.18
    label: liva2
  -
    id: 35.2.0.100
    label: liva3
  -
    added_by_mesh_agent: yes
    id: 198.111.226.26
    label: iLab pstoolkit MA
  -
    added_by_mesh_agent: yes
    id: 198.111.227.235
    label: iLab pstoolkit ROY
  -
    added_by_mesh_agent: yes
    id: 141.213.253.141
    label: LIVA1
  -
    added_by_mesh_agent: yes
    id: 141.213.135.18
    label: LIVA2
  -
    added_by_mesh_agent: yes
    id: 35.2.0.100
    label: LIVA3 (wi-fi)
groups:
  MPerf_Mesh_-_OWAMP_Test_Between_DICE_Latency_Hosts:
    - 35.2.0.100
    - 141.213.253.141
    - 198.111.226.26
    - 141.213.135.18
    - 198.111.227.235
  MPerf_Mesh_-_TCP_BWCTL_Test_Between_DICE_Bandwidth_Hosts:
    - 35.2.0.100
    - 141.213.253.141
    - 198.111.226.26
    - 141.213.135.18
    - 198.111.227.235
  MPerf_Mesh_-_UDP_BWCTL_Test_Between_DICE_Bandwidth_Hosts:
    - 35.2.0.100
    - 141.213.253.141
    - 198.111.226.26
    - 141.213.135.18
    - 198.111.227.235
  myBwctlHosts:
    - 198.111.227.235
    - 198.111.226.26
    - 141.213.253.141
    - 141.213.135.18
    - 35.2.0.100
  myOwampHosts:
    - 198.111.227.235
    - 198.111.226.26
    - 141.213.253.141
    - 141.213.135.18
    - 35.2.0.100
http:
  port: 8881
serverHost: localhost
